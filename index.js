// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ù…Ø±ÙƒØ²Ù‡Ø§
var map = L.map('map').setView([23.8859, 45.0792], 2); // Ù…Ø±ÙƒØ² Ø§Ù„Ø¹Ø§Ù„Ù…

// Ø¥Ø¶Ø§ÙØ© Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap contributors'
}).addTo(map);
var cities = {
  // ğŸ”¹ Ø§Ù„Ø´Ø±Ù‚ Ø§Ù„Ø£ÙˆØ³Ø·
  "Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":       { lat: 24.7136, lon: 46.6753, risk: 0.1 },
  "Ø¬Ø¯Ø©ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":          { lat: 21.4858, lon: 39.1925, risk: 1.2 },
  "Ù…ÙƒØ©ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":          { lat: 21.3891, lon: 39.8579, risk: 1.0 },
  "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":      { lat: 24.5247, lon: 39.5692, risk: 0.8 },
  "Ø£Ø¨Ù‡Ø§ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":         { lat: 18.2465, lon: 42.5126, risk: 0.3 },
  "Ø§Ù„Ø¯Ù…Ø§Ù…ØŒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©":       { lat: 26.4333, lon: 50.1033, risk: 0.0 },
  "Ø·Ù‡Ø±Ø§Ù†ØŒ Ø¥ÙŠØ±Ø§Ù†":           { lat: 35.6892, lon: 51.3890, risk: 5.6 },
  "ÙƒØ§Ø¨Ù„ØŒ Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†":        { lat: 34.5553, lon: 69.2075, risk: 5.1 },
  "Ø¨ÙŠØ±ÙˆØªØŒ Ù„Ø¨Ù†Ø§Ù†":           { lat: 33.8938, lon: 35.5018, risk: 2.2 },
  "Ø¯Ù…Ø´Ù‚ØŒ Ø³ÙˆØ±ÙŠØ§":            { lat: 33.5138, lon: 36.2765, risk: 2.5 },
  "Ø¹Ù…Ø§Ù†ØŒ Ø§Ù„Ø£Ø±Ø¯Ù†":           { lat: 31.9454, lon: 35.9284, risk: 1.9 },
  "Ø¨ØºØ¯Ø§Ø¯ØŒ Ø§Ù„Ø¹Ø±Ø§Ù‚":          { lat: 33.3152, lon: 44.3661, risk: 1.1 },
  "ØµÙ†Ø¹Ø§Ø¡ØŒ Ø§Ù„ÙŠÙ…Ù†":           { lat: 15.3694, lon: 44.1910, risk: 0.6 },
  "Ù…Ø³Ù‚Ø·ØŒ Ø¹Ù…Ø§Ù†":             { lat: 23.5880, lon: 58.3829, risk: 0.4 },

  //  Ø¢Ø³ÙŠØ§
  "Ø·ÙˆÙƒÙŠÙˆØŒ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†":         { lat: 35.6762, lon: 139.6503, risk: 12.5 },
  "Ø¬Ø§ÙƒØ±ØªØ§ØŒ Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§":      { lat: -6.2088, lon: 106.8456, risk: 9.3 },
  "ÙƒØ§ØªÙ…Ø§Ù†Ø¯ÙˆØŒ Ù†ÙŠØ¨Ø§Ù„":        { lat: 27.7172, lon: 85.3240, risk: 5.9 },
  "ÙƒÙˆÙŠØ²ÙˆÙ†ØŒ Ø§Ù„ÙÙ„Ø¨ÙŠÙ†":        { lat: 14.6760, lon: 121.0437, risk: 6.2 },
  "Ù‡Ø§Ù†ÙˆÙŠØŒ ÙÙŠØªÙ†Ø§Ù…":          { lat: 21.0285, lon: 105.8542, risk: 2.8 },
  "ÙƒØ§Ø¨Ù„ØŒ Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†":        { lat: 34.5553, lon: 69.2075, risk: 5.1 },
  "Ø·Ù‡Ø±Ø§Ù†ØŒ Ø¥ÙŠØ±Ø§Ù†":           { lat: 35.6892, lon: 51.3890, risk: 5.6 },
  "Ø¥Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯ØŒ Ø¨Ø§ÙƒØ³ØªØ§Ù†":    { lat: 33.6844, lon: 73.0479, risk: 4.3 },
  "Ø¨Ù†ØºÙ„ÙˆØ±ØŒ Ø§Ù„Ù‡Ù†Ø¯":          { lat: 12.9716, lon: 77.5946, risk: 2.1 },
  "ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙˆØŒ Ø³Ø±ÙŠÙ„Ø§Ù†ÙƒØ§":      { lat: 6.9271, lon: 79.8612, risk: 1.4 },
  "Ø¨Ø§Ù†ÙƒÙˆÙƒØŒ ØªØ§ÙŠÙ„Ø§Ù†Ø¯":        { lat: 13.7563, lon: 100.5018, risk: 1.7 },
  "ÙƒÙˆØ§Ù„Ø§Ù„Ù…Ø¨ÙˆØ±ØŒ Ù…Ø§Ù„ÙŠØ²ÙŠØ§":    { lat: 3.1390, lon: 101.6869, risk: 1.2 },
  "Ø³Ù†ØºØ§ÙÙˆØ±Ø©":               { lat: 1.3521, lon: 103.8198, risk: 0.9 },

  //  Ø£ÙˆØ±ÙˆØ¨Ø§
  "Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ØŒ ØªØ±ÙƒÙŠØ§":         { lat: 41.0082, lon: 28.9784, risk: 4.7 },
  "Ø£Ø«ÙŠÙ†Ø§ØŒ Ø§Ù„ÙŠÙˆÙ†Ø§Ù†":         { lat: 37.9838, lon: 23.7275, risk: 4.2 },
  "Ø±ÙˆÙ…Ø§ØŒ Ø¥ÙŠØ·Ø§Ù„ÙŠØ§":          { lat: 41.9028, lon: 12.4964, risk: 3.5 },
  "ÙƒÙˆÙŠØ¨ÙŠÙƒØŒ ÙƒÙ†Ø¯Ø§":           { lat: 46.8139, lon: -71.2080, risk: 1.9 },

  //  Ø£Ù…Ø±ÙŠÙƒØ§
  "Ù„ÙˆØ³ Ø£Ù†Ø¬Ù„ÙˆØ³ØŒ Ø£Ù…Ø±ÙŠÙƒØ§":     { lat: 34.0522, lon: -118.2437, risk: 7.8 },
  "Ø³Ø§Ù†ØªÙŠØ§ØºÙˆØŒ ØªØ´ÙŠÙ„ÙŠ":        { lat: -33.4489, lon: -70.6693, risk: 10.1 },
  "Ù…ÙƒØ³ÙŠÙƒÙˆ Ø³ÙŠØªÙŠØŒ Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ":   { lat: 19.4326, lon: -99.1332, risk: 6.8 },
  "Ø¨ÙˆØ±Øª Ø£Ùˆ Ø¨Ø±Ù†Ø³ØŒ Ù‡Ø§ÙŠØªÙŠ":    { lat: 18.5944, lon: -72.3074, risk: 3.9 },

  //  Ø£ÙˆÙ‚ÙŠØ§Ù†ÙˆØ³ÙŠØ§
  "ÙƒØ±Ø§ÙŠØ³ØªØ´ÙŠØ±Ø´ØŒ Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§":  { lat: -43.5321, lon: 172.6362, risk: 4.9 },
  "Ø£ÙˆÙƒÙ„Ø§Ù†Ø¯ØŒ Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§":     { lat: -36.8485, lon: 174.7633, risk: 2.5 },

  //  Ø£ÙØ±ÙŠÙ‚ÙŠØ§
  "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ØŒ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±":       { lat: 36.7538, lon: 3.0588, risk: 2.7 },
  "Ø§Ù„Ø±Ø¨Ø§Ø·ØŒ Ø§Ù„Ù…ØºØ±Ø¨":         { lat: 34.0209, lon: -6.8416, risk: 1.5 },
  "ØªÙˆÙ†Ø³ØŒ ØªÙˆÙ†Ø³":             { lat: 36.8065, lon: 10.1815, risk: 1.8 },
  "Ø£Ø¯ÙŠØ³ Ø£Ø¨Ø§Ø¨Ø§ØŒ Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§":    { lat: 9.0300, lon: 38.7400, risk: 2.1 }
};

// Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø¯Ù†
for (var city in cities) {
  var data = cities[city];
  var color = data.risk > 7 ? 'red' : data.risk >= 3 ? 'orange' : 'green';

  var marker = L.circleMarker([data.lat, data.lon], {
    radius: 10,
    color: color,
    fillColor: color,
    fillOpacity: 0.7
  }).addTo(map);

  marker.bindPopup(`<b>${city}</b><br>Ù†Ø³Ø¨Ø© Ø®Ø·Ø± Ø§Ù„Ø²Ù„Ø§Ø²Ù„: ${data.risk}%`);

  // ØªÙ†Ø¨ÙŠÙ‡ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø°Ø§Øª Ø®Ø·Ø± Ù…Ø±ØªÙØ¹
  (function(cityName, cityData) {
    marker.on('click', function () {
      if (cityData.risk > 7) {
        alert(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ${cityName} ØªØ¹ØªØ¨Ø± Ù…Ù†Ø·Ù‚Ø© Ø°Ø§Øª Ø®Ø·Ø± Ø²Ù„Ø²Ø§Ù„ÙŠ Ù…Ø±ØªÙØ¹! Ù†Ø³Ø¨Ø© Ø§Ù„Ø®Ø·Ø± ${cityData.risk}%`);
      }
    });
  })(city, data);
}
